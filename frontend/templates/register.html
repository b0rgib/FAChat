{% extends "base.html" %}
{% block title %}
    <title>Register</title>
{% endblock %}
{% block content %}
    <script>
    function register(){
    const email = document.getElementById("email");
    const password = document.getElementById("password");
    const username = document.getElementById("name");
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://127.0.0.1:8000/auth/register", true);
    xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8");
    xhr.onreadystatechange = function () {
    window.location.replace("/login");
    };
    var json = JSON.stringify({email: email.value, password: password.value, is_active: true, is_superuser: false, is_verified: false, username: username.value});
    console.log(json)
    xhr.send(json);
    ;};
    </script>
    <div style="margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);">
        <form onsubmit="event.preventDefault();" id="form" action="">
            <div>
                <label for="name">Enter your username: </label>
                <input type="text" name="name" id="name" required>
            </div>
            </br>
            <div>
                <label for="name">Enter your email: </label>
                <input type="email" name="email" id="email" required>
            </div>
            </br>
            <div class="form-example">
                <label for="email">Enter your password: </label>
                <input type="password" name="password" id="password" required>
            </div>
            </br>
            <div>
                <input type="submit" value="Register" onclick="register()">
            </div>
        </form>
    </div>
{% endblock %}